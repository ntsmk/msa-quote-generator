<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monthly MSA Estimate Generator</title>
    <!-- External Libraries (CDNs) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <!-- Link to our custom external CSS file -->
    <link href="style.css" rel="stylesheet">

</head>
<body class="flex flex-col min-h-screen text-slate-800">

    <!-- Header Section -->
    <header class="bg-white shadow-sm border-b border-stone-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold text-stone-800 tracking-tight">MSA Estimate Generator</h1>
                <p class="text-sm text-stone-500 mt-1">Interactive Monthly Cost Estimator</p>
            </div>
            <div class="hidden sm:block">
                <button onclick="exportToPDF()" class="bg-stone-100 hover:bg-stone-200 text-stone-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                    ðŸ“Œ Save as PDF
                </button>
            </div>
        </div>
    </header>

    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">

        <!-- Intro Section -->
        <section class="mb-10 max-w-3xl mx-auto text-center">
            <h2 class="text-3xl font-bold text-stone-800 mb-4">Estimate Your Monthly MSA Costs</h2>
            <p class="text-lg text-stone-600 leading-relaxed">
                Use the interactive tool below to calculate your estimated monthly IT service fees.
                Enter the quantity of each device or server type in your inventory. The totals and cost breakdown charts will update automatically as you type.
            </p>
        </section>

        <!-- Main Calculator Section -->
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 mb-16">

            <!-- Left Column: Inputs -->
            <div class="lg:col-span-7 space-y-6">
                <!-- Inventory Configuration -->
                <div class="bg-white rounded-2xl shadow-lg border border-stone-100 overflow-hidden">
                    <div class="p-6 bg-stone-50 border-b border-stone-100 flex justify-between items-center">
                        <h3 class="text-lg font-semibold text-stone-700">Inventory Configuration</h3>
                        <span class="text-xs font-medium bg-amber-100 text-amber-800 px-2 py-1 rounded-full">Editable</span>
                    </div>
                    <div class="p-6">
                        <p class="text-sm text-stone-500 mb-6">Enter the number of units for each asset type below.</p>

                        <div id="input-container" class="space-y-4">
                            <!-- JS will populate rows here -->
                        </div>
                    </div>
                </div>

                <!-- Commitment Type Selection -->
                <div class="bg-white rounded-2xl shadow-lg border border-stone-100 overflow-hidden">
                    <div class="p-6 bg-stone-50 border-b border-stone-100">
                        <h3 class="text-lg font-semibold text-stone-700">Commitment Period</h3>
                        <p class="text-xs text-stone-500 mt-1">Choose a commitment period to unlock discounts</p>
                    </div>
                    <div class="p-6">
                        <div class="space-y-3">
                            <label class="flex items-center justify-between p-4 border-2 border-stone-200 rounded-lg cursor-pointer hover:border-stone-400 transition-colors">
                                <div class="flex items-center">
                                    <input type="radio" name="commitment" value="0" class="w-4 h-4 text-stone-800 focus:ring-stone-500" checked onchange="handleCommitmentChange()">
                                    <span class="ml-3 font-medium text-stone-800">No Commitment</span>
                                </div>
                                <span class="text-sm text-stone-500">Standard pricing</span>
                            </label>
                            
                            <label class="flex items-center justify-between p-4 border-2 border-stone-200 rounded-lg cursor-pointer hover:border-amber-400 transition-colors">
                                <div class="flex items-center">
                                    <input type="radio" name="commitment" value="5" class="w-4 h-4 text-amber-600 focus:ring-amber-500" onchange="handleCommitmentChange()">
                                    <span class="ml-3 font-medium text-stone-800">1 Year</span>
                                </div>
                                <span class="text-sm font-semibold text-amber-600">5% off</span>
                            </label>
                            
                            <label class="flex items-center justify-between p-4 border-2 border-stone-200 rounded-lg cursor-pointer hover:border-amber-500 transition-colors">
                                <div class="flex items-center">
                                    <input type="radio" name="commitment" value="10" class="w-4 h-4 text-amber-600 focus:ring-amber-500" onchange="handleCommitmentChange()">
                                    <span class="ml-3 font-medium text-stone-800">2 Years</span>
                                </div>
                                <span class="text-sm font-semibold text-amber-600">10% off</span>
                            </label>
                            
                            <label class="flex items-center justify-between p-4 border-2 border-stone-200 rounded-lg cursor-pointer hover:border-amber-600 transition-colors">
                                <div class="flex items-center">
                                    <input type="radio" name="commitment" value="15" class="w-4 h-4 text-amber-600 focus:ring-amber-500" onchange="handleCommitmentChange()">
                                    <span class="ml-3 font-medium text-stone-800">3 Years</span>
                                </div>
                                <span class="text-sm font-semibold text-amber-600">15% off</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Live Summary -->
            <div class="lg:col-span-5 flex flex-col h-full space-y-8">

                <!-- Grand Total Card -->
                <div class="bg-gradient-to-br from-stone-800 to-stone-900 rounded-2xl shadow-xl p-8 text-white relative overflow-hidden">
                    <div class="relative z-10">
                        <h3 class="text-stone-300 text-sm font-medium uppercase tracking-wider mb-2">Estimated Monthly Total</h3>
                        <div class="flex flex-col items-start">
                            <div id="original-price-container" class="hidden mb-2">
                                <span class="text-lg text-stone-400 line-through">CA$ <span id="original-total-display">0.00</span></span>
                                <span class="ml-2 text-xs bg-amber-500 text-white px-2 py-1 rounded-full font-semibold" id="discount-badge"></span>
                            </div>
                            <div class="flex items-baseline">
                                <span class="text-2xl font-light text-stone-400 mr-2">CA$</span>
                                <span id="grand-total-display" class="text-5xl font-bold tracking-tight">0.00</span>
                            </div>
                        </div>
                        <p class="text-stone-400 text-sm mt-4 border-t border-stone-700 pt-4">
                            Based on <span id="total-items-display" class="font-semibold text-white">0</span> total assets.
                        </p>
                    </div>
                    <!-- Decor element -->
                    <div class="absolute top-0 right-0 -mr-16 -mt-16 w-48 h-48 bg-white opacity-5 rounded-full blur-3xl"></div>
                </div>

                <!-- Cost Breakdown Chart -->
                <div class="bg-white rounded-2xl shadow-lg border border-stone-100 p-6 flex-grow flex flex-col">
                    <h3 class="text-lg font-semibold text-stone-700 mb-2">Cost Distribution</h3>
                    <p class="text-sm text-stone-500 mb-6">See which asset types contribute most to your monthly bill. Workstations and devices appear in gray tones, servers in blue, and critical assets in red.</p>

                    <div class="chart-container flex-grow">
                        <canvas id="costBreakdownChart" class="w-full h-full"></canvas>
                    </div>
                    <div id="chart-legend" class="mt-4 flex flex-wrap gap-2 justify-center text-xs text-stone-500">
                        <!-- Dynamic legend or empty if chart handles it -->
                    </div>
                </div>

            </div>
        </div>

    </main>

    <footer class="bg-stone-100 border-t border-stone-200 mt-auto">
        <div class="max-w-7xl mx-auto px-4 py-6 text-center text-stone-500 text-sm">
            <p>&copy; 2026 MSA Estimate Generator. All rates are in Canadian Dollars (CA$).</p>
        </div>
    </footer>

    <!-- Link to our custom external JavaScript file -->
    <script src="script.js"></script>
</body>
</html>